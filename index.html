<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>IPL 2026 Mega Auction - OFFICIAL LIVE</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="icon" href="https://iplstatic.s3.amazonaws.com/ipl/logo.png">
<script src="https://cdn.jsdelivr.net/npm/confetti-js@0.0.18/dist/index.min.js"></script>
<style>
:root{
  --bg:#0f172a;--card:#1e293b;--text:#e2e8f0;--green:#10b981;--red:#ef4444;--gold:#fbbf24;
  --blue:#3b82f6;--orange:#ff6d00;--purple:#a855f7;--border:#334155;
  --csk:#ffcc29;--mi:#004ba0;--rcb:#d11f2a;--kkr:#3b215d;--srh:#ff8c00;
  --gt:#1c1c3a;--lsg:#00a0e3;--dc:#004c93;--pbks:#d71920;--rr:#ea1a85;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Segoe UI',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;}
.container{max-width:1600px;margin:0 auto;padding:20px;}
header{text-align:center;padding:50px;background:linear-gradient(135deg,#000428,#004e92);border-bottom:10px solid var(--gold);}
h1{font-size:5.5rem;color:var(--gold);text-shadow:0 0 50px #000;letter-spacing:3px;}
.subtitle{font-size:2rem;color:#94a3b8;margin-top:15px;}
.top-bar{display:flex;justify-content:space-between;align-items:center;margin:40px 0;}
.status{padding:20px 60px;border-radius:60px;font-weight:bold;font-size:2.5rem;}
.status.live{background:#166534;color:white;}.status.paused{background:#ca8a04;color:white;}.status.stopped{background:#991b1b;color:white;}
.timer{background:var(--card);padding:20px 60px;border-radius:60px;border:5px solid var(--gold);font-size:3rem;font-weight:bold;}
.set-nav{display:flex;justify-content:center;gap:40px;align-items:center;margin:50px 0;}
.set-btn{padding:25px 60px;background:var(--purple);color:white;border:none;border-radius:60px;font-size:2.2rem;font-weight:bold;cursor:pointer;box-shadow:0 20px 50px rgba(168,85,247,0.5);}
.set-btn:hover{transform:scale(1.15);}
.set-info{font-size:3.5rem;color:var(--gold);font-weight:900;margin:0 50px;}
.grid{display:grid;grid-template-columns:1fr 520px;gap:50px;margin-top:50px;}@media(max-width:1200px){.grid{grid-template-columns:1fr;}}
.card{background:var(--card);border-radius:30px;padding:50px;border:3px solid var(--border);margin-bottom:40px;box-shadow:0 30px 80px rgba(0,0,0,0.8);}
.player-card{text-align:center;}.player-photo{width:260px;height:260px;background:#334155;border-radius:50%;margin:0 auto 40px;display:flex;align-items:center;justify-content:center;font-size:120px;font-weight:bold;color:#64748b;border:12px solid var(--gold);}
.current-bid{background:var(--green);color:black;padding:60px;border-radius:35px;font-size:8rem;font-weight:900;margin:60px 0;box-shadow:0 30px 70px rgba(16,185,129,0.7);}
.bid-team{display:flex;align-items:center;justify-content:center;gap:50px;margin:50px 0;}.team-logo{width:130px;height:130px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:3.5rem;box-shadow:0 20px 50px rgba(0,0,0,0.8);}
.interested{display:flex;flex-wrap:wrap;gap:20px;justify-content:center;margin:60px 0;}.tag{background:#334155;padding:20px 40px;border-radius:50px;font-weight:700;font-size:1.6rem;}
.team-table{width:100%;border-collapse:collapse;margin-top:30px;}.team-table th,.team-table td{padding:20px;border:2px solid var(--border);text-align:center;font-size:1.4rem;}.team-table th{background:#1e293b;}
.login-section{background:var(--card);padding:60px;border-radius:35px;text-align:center;margin:80px 0;box-shadow:0 40px 100px rgba(0,0,0,0.9);}
.login-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:25px;margin-top:40px;}
.login-option{padding:35px;background:var(--blue);color:white;border-radius:25px;font-size:2rem;font-weight:bold;cursor:pointer;transition:0.4s;}
.login-option:hover{transform:scale(1.1);box-shadow:0 20px 50px rgba(59,130,246,0.6);}
.login-option.csk{background:var(--csk);color:#000;}.login-option.mi{background:var(--mi);}.login-option.rcb{background:var(--rcb);}.login-option.kkr{background:var(--kkr);}.login-option.srh{background:var(--srh);}.login-option.gt{background:var(--gt);}.login-option.lsg{background:var(--lsg);}.login-option.dc{background:var(--dc);}.login-option.pbks{background:var(--pbks);}.login-option.rr{background:var(--rr);}.login-option.curator{background:#000;color:var(--gold);border:4px solid var(--gold);}
.team-bid-panel{display:none;background:var(--card);padding:60px;border-radius:35px;text-align:center;border:8px solid var(--gold);margin:60px 0;}
.bid-buttons{display:grid;grid-template-columns:repeat(3,1fr);gap:30px;margin:50px 0;}
.bid-btn{padding:45px;font-size:3.5rem;font-weight:bold;border-radius:30px;cursor:pointer;background:var(--green);color:black;box-shadow:0 20px 50px rgba(16,185,129,0.6);}
.bid-btn:hover{transform:scale(1.2);}.admin-panel{display:none;margin-top:80px;}.admin-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:35px;margin-top:50px;}
.btn{padding:30px 60px;background:var(--green);color:black;border:none;border-radius:30px;font-size:2.5rem;font-weight:bold;cursor:pointer;box-shadow:0 20px 50px rgba(16,185,129,0.6);margin:20px;}
.btn:hover{transform:scale(1.1);}.btn-red{background:var(--red);color:white;}.btn-purple{background:var(--purple);color:white;}.btn-orange{background:var(--orange);color:white;}
.hidden{display:none!important;}
.loading{padding:100px;text-align:center;font-size:3rem;color:var(--gold);}
</style>
</head>
<body>
<div class="container">
  <header>
    <h1>IPL 2026 MEGA AUCTION</h1>
    <p class="subtitle">OFFICIAL LIVE AUCTION SYSTEM</p>
  </header>

  <div class="top-bar">
    <div class="status stopped" id="statusText">LOADING DATA...</div>
    <div class="timer">Time: <span id="timer">01:00</span></div>
  </div>

  <div class="set-nav">
    <button class="set-btn" onclick="prevSet()">‚¨ÖÔ∏è Previous Set</button>
    <div class="set-info" id="setInfo">SET 1 ‚Äî BATTERS</div>
    <button class="set-btn" onclick="nextSet()">Next Set ‚û°Ô∏è</button>
  </div>

  <!-- LOADING SCREEN -->
  <div id="loadingScreen" class="loading card">
    üîÑ Loading data.json (200+ Players + 10 Teams)...
  </div>

  <div id="mainView" style="display:none;">
    <div class="grid">
      <div>
        <div class="card player-card">
          <h2 style="color:var(--gold);font-size:4rem;">CURRENT PLAYER</h2>
          <div class="player-photo" id="playerPhoto">DC</div>
          <h2 id="playerName" style="font-size:7rem;margin:60px 0;">Devon Conway</h2>
          <p id="playerInfo" style="font-size:3rem;margin:50px 0;">Batsman ‚Ä¢ New Zealand ‚Ä¢ Base: ‚Çπ2.00 Cr</p>
          <div class="current-bid" id="currentBid">‚Çπ 2.00 Cr</div>
          <div class="bid-team">
            <div class="team-logo" id="bidTeamLogo">--</div>
            <div>
              <div style="opacity:0.8;font-size:2.5rem;">Highest Bidder</div>
              <div id="bidTeamName" style="font-size:6rem;font-weight:900;">No bids yet</div>
            </div>
          </div>
          <div class="interested" id="interestedTeams"></div>
          <div id="soldUnsoldButtons" style="margin-top:80px;display:flex;gap:50px;justify-content:center;">
            <button class="btn btn-green" onclick="soldToCurrent()">‚úÖ SOLD</button>
            <button class="btn btn-red" onclick="unsoldCurrent()">‚ùå UNSOLD</button>
          </div>
        </div>
      </div>
      <div>
        <div class="card">
          <h3 style="color:var(--gold);font-size:3.5rem;margin-bottom:35px;">üèè TEAM PURSE & SLOTS</h3>
          <table class="team-table" id="teamTable">
            <thead><tr><th>Team</th><th>Purse</th><th>Slots</th><th>OS</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
        <div class="card">
          <h3 style="color:var(--gold);font-size:3.5rem;margin-bottom:30px;">üìä LIVE BID LOG</h3>
          <div style="max-height:700px;overflow-y:auto;">
            <ul style="list-style:none;padding:0;" id="activityList">
              <li>Waiting for auction to start...</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 11 TEAM LOGIN BUTTONS WITH LIVE PURSE -->
  <div class="login-section">
    <h2 style="font-size:5rem;color:var(--gold);margin-bottom:50px;">‚ö° SELECT YOUR TEAM</h2>
    <div class="login-grid" id="loginGrid">
      <!-- DYNAMICALLY POPULATED FROM data.json -->
    </div>
  </div>

  <!-- TEAM BIDDING PANEL -->
  <div class="team-bid-panel" id="teamBidPanel">
    <h2 id="teamNameDisplay" style="font-size:5rem;color:var(--gold);">YOUR TEAM</h2>
    <div class="current-bid" style="font-size:6rem;" id="teamCurrentBid">‚Çπ 0 Cr</div>
    <div class="bid-buttons">
      <button class="bid-btn" onclick="teamBid(0.25)">+0.25</button>
      <button class="bid-btn" onclick="teamBid(0.50)">+0.50</button>
      <button class="bid-btn" onclick="teamBid(1)">+1 Cr</button>
      <button class="bid-btn" onclick="teamBid(2)">+2 Cr</button>
      <button class="bid-btn" onclick="teamBid(5)">+5 Cr</button>
      <button class="bid-btn" onclick="teamBid(10)">+10 Cr</button>
    </div>
    <p style="font-size:2.5rem;margin-top:50px;">
      Purse: <span id="teamPurse">‚Çπ0 Cr</span> | Slots: <span id="teamSlots">0</span>
    </p>
  </div>

  <!-- ADMIN PANEL -->
  <div class="card admin-panel" id="adminPanel">
    <h2 style="color:var(--red);text-align:center;font-size:5rem;margin-bottom:60px;">üî• CURATOR CONTROL</h2>
    <div style="display:flex;gap:50px;justify-content:center;margin-bottom:70px;flex-wrap:wrap;">
      <button class="btn btn-green" onclick="startAuction()">‚ñ∂Ô∏è START</button>
      <button class="btn btn-orange" onclick="pauseAuction()">‚è∏Ô∏è PAUSE</button>
      <button class="btn btn-red" onclick="stopAuction()">‚èπÔ∏è STOP</button>
    </div>
    <div class="admin-grid">
      <button class="btn btn-green" onclick="soldToCurrent()">‚úÖ SOLD</button>
      <button class="btn btn-red" onclick="unsoldCurrent()">‚ùå UNSOLD</button>
      <button class="btn btn-purple" onclick="nextPlayer()">‚è≠Ô∏è NEXT</button>
      <button class="btn btn-orange" onclick="randomPlayer()">üé≤ RANDOM</button>
    </div>
  </div>
</div>

<audio id="bidSound" src="https://assets.mixkit.co/sfx/preview/mixkit-coin-win-notification-2634.mp3"></audio>
<audio id="soldSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-gong-1939.mp3"></audio>
<audio id="timerBeep" src="https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3"></audio>

<script>
// üî• AUTO-LOADS YOUR COMPLETE data.json (200+ Players + 10 Teams)
let players=[], teams=[], currentIndex=0, isAdmin=false, loggedInTeam=null, auctionStarted=false, currentTimer=60, timerInterval;

async function loadData() {
  try {
    const response = await fetch('data.json');
    const data = await response.json();
    
    // PERFECT JSON STRUCTURE SUPPORT
    players = data.players || data.sets?.flatMap(set => set.players) || [];
    teams = data.teams || [];
    
    // Add missing fields for compatibility
    players.forEach(p => {
      if (!p.highestBid) p.highestBid = p.base_price_crore;
      if (!p.bidTeam) p.bidTeam = "No bids yet";
      if (!p.bidTeamShort) p.bidTeamShort = "--";
      if (!p.initials) p.initials = p.name.split(" ").map(n=>n[0]).join("").slice(0,2).toUpperCase();
    });
    
    console.log(`‚úÖ Loaded ${players.length} players & ${teams.length} teams from data.json`);
    
    renderLoginButtons();
    renderTeams();
    showPlayer(0);
    document.getElementById('loadingScreen').style.display = 'none';
    document.getElementById('mainView').style.display = 'block';
    document.getElementById('statusText').textContent = 'NOT STARTED';
    
  } catch (error) {
    console.error('‚ùå data.json not found - using fallback');
    document.getElementById('loadingScreen').innerHTML = '‚ùå data.json missing!<br>Add your player/team JSON file.';
  }
}

// üî• DYNAMIC LOGIN BUTTONS FROM data.json
function renderLoginButtons() {
  const grid = document.getElementById('loginGrid');
  grid.innerHTML = '';
  
  teams.forEach((team, index) => {
    const btn = document.createElement('div');
    btn.className = `login-option ${team.team_name.toLowerCase().replace(/ /g,'')}`;
    btn.innerHTML = `${team.team_name.split(' ')[0]}<br>‚Çπ${team.purse_crores.toFixed(1)}Cr ‚Ä¢ ${team.overall_slots_left} Slots`;
    btn.onclick = () => tryLogin(team.username, team.password);
    grid.appendChild(btn);
  });
  
  // Add Curator button
  const curator = document.createElement('div');
  curator.className = 'login-option curator';
  curator.innerHTML = 'üîê CURATOR';
  curator.onclick = () => tryLogin('qwertyuiop', 'bluezone0025');
  grid.appendChild(curator);
}

// üéµ SOUND EFFECTS
function playSound(soundId){document.getElementById(soundId)?.play();}

// üî• LOGIN SYSTEM
function tryLogin(username, password){
  if(username==="qwertyuiop"&&password==="bluezone0025"){
    isAdmin=true;
    document.getElementById("adminPanel").style.display="block";
    document.getElementById("soldUnsoldButtons").style.display="flex";
    alert("üî• CURATOR MODE ACTIVATED! üéâ");
    playSound("bidSound");
  }else{
    loggedInTeam=teams.find(t=>t.username===username&&t.password===password);
    if(loggedInTeam){
      document.getElementById("teamBidPanel").style.display="block";
      document.getElementById("teamNameDisplay").textContent=loggedInTeam.team_name;
      document.getElementById("teamPurse").textContent=`‚Çπ${loggedInTeam.purse_crores.toFixed(1)} Cr`;
      document.getElementById("teamSlots").textContent=loggedInTeam.overall_slots_left;
      alert(`‚úÖ Welcome ${loggedInTeam.team_name}! üí∞ Purse: ‚Çπ${loggedInTeam.purse_crores.toFixed(1)}Cr`);
      playSound("bidSound");
    }else{
      alert("‚ùå Login Krle Phele!");
    }
  }
}

// üèè MAIN AUCTION ENGINE
function showPlayer(idx){
  if(!players[idx]) return;
  const p=players[idx]; currentIndex=idx;
  document.getElementById("playerName").textContent=p.name;
  document.getElementById("playerInfo").textContent=`${p.role?.toUpperCase()||'ALL'} ‚Ä¢ ${p.country} ‚Ä¢ Base: ‚Çπ${p.base_price_crore?.toFixed(2)||'0'} Cr`;
  document.getElementById("playerPhoto").textContent=p.initials||"??";
  document.getElementById("currentBid").textContent=`‚Çπ ${p.highestBid?.toFixed(2)||'0'} Cr`;
  document.getElementById("bidTeamName").textContent=p.bidTeam||"No bids yet";
  document.getElementById("bidTeamLogo").textContent=p.bidTeamShort||"--";
  document.getElementById("setInfo").textContent=`PLAYER ${idx+1} / ${players.length}`;
  renderTeams();
}

function renderTeams(){
  const tbody=document.querySelector("#teamTable tbody");
  tbody.innerHTML="";
  teams.forEach(t=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`<td>${t.team_name.split(" ")[0]}</td><td>‚Çπ${t.purse_crores.toFixed(1)} Cr</td><td>${t.overall_slots_left||0}</td><td>${t.overseas_slots_left||0}</td>`;
    tbody.appendChild(tr);
  });
}

function teamBid(amount){
  if(!loggedInTeam){alert("‚ùå Login Krle Phele!");return;}
  if(loggedInTeam.purse_crores<amount){alert(`‚ùå Insufficient Purse!`);return;}
  
  loggedInTeam.purse_crores-=amount;
  players[currentIndex].highestBid=(parseFloat(players[currentIndex].highestBid||0)+amount).toFixed(2);
  players[currentIndex].bidTeamShort=loggedInTeam.team_name.split(" ")[0];
  players[currentIndex].bidTeam=loggedInTeam.team_name;
  
  document.getElementById("teamPurse").textContent=`‚Çπ${loggedInTeam.purse_crores.toFixed(1)} Cr`;
  showPlayer(currentIndex);
  playSound("bidSound");
  renderTeams();
}

function startAuction(){auctionStarted=true;document.getElementById("statusText").className="status live";document.getElementById("statusText").textContent="üî¥ LIVE";startTimer();playSound("bidSound");}
function startTimer(){let time=60;timerInterval=setInterval(()=>{time--;const m=String(Math.floor(time/60)).padStart(2,"0"),s=String(time%60).padStart(2,"0");document.getElementById("timer").textContent=`${m}:${s}`;if(time<=0){playSound("timerBeep");nextPlayer();time=60;}},1000);}
function nextPlayer(){currentIndex=(currentIndex+1)%players.length;showPlayer(currentIndex);}
function soldToCurrent(){playSound("soldSound");if(confetti)confetti({particleCount:200,spread:70});nextPlayer();}
function unsoldCurrent(){playSound("timerBeep");nextPlayer();}
function pauseAuction(){clearInterval(timerInterval);document.getElementById("statusText").className="status paused";document.getElementById("statusText").textContent="‚è∏Ô∏è PAUSED";}
function stopAuction(){clearInterval(timerInterval);document.getElementById("statusText").className="status stopped";document.getElementById("statusText").textContent="‚èπÔ∏è STOPPED";}
function randomPlayer(){currentIndex=Math.floor(Math.random()*players.length);showPlayer(currentIndex);}
function prevSet(){}function nextSet(){}

window.onload=()=>{
  loadData();
};
</script>
</body>
</html>
